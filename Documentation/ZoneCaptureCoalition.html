<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-97385487-1"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-97385487-1');</script>
		<link rel="stylesheet" href="stylesheet.css" type="text/css"/>
	</head>
<body>
<div id="container">
<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div>
<div id="main">
	<div id="navigation">
		<h2>Modules</h2>
			<ul><li>
				<a href="index.html">index</a>
			</li></ul>
		<ul>
					<li><a href="AI_A2A.html">AI_A2A</a></li>
					<li><a href="AI_A2A_Cap.html">AI_A2A_Cap</a></li>
					<li><a href="AI_A2A_Dispatcher.html">AI_A2A_Dispatcher</a></li>
					<li><a href="AI_A2A_GCI.html">AI_A2A_GCI</a></li>
					<li><a href="AI_A2A_Patrol.html">AI_A2A_Patrol</a></li>
					<li><a href="AI_Bai.html">AI_Bai</a></li>
					<li><a href="AI_Balancer.html">AI_Balancer</a></li>
					<li><a href="AI_Cap.html">AI_Cap</a></li>
					<li><a href="AI_Cas.html">AI_Cas</a></li>
					<li><a href="AI_Formation.html">AI_Formation</a></li>
					<li><a href="AI_Patrol.html">AI_Patrol</a></li>
					<li><a href="ATC_Ground.html">ATC_Ground</a></li>
					<li><a href="Account.html">Account</a></li>
					<li><a href="Airbase.html">Airbase</a></li>
					<li><a href="Assign.html">Assign</a></li>
					<li><a href="Base.html">Base</a></li>
					<li><a href="Cargo.html">Cargo</a></li>
					<li><a href="CleanUp.html">CleanUp</a></li>
					<li><a href="Client.html">Client</a></li>
					<li><a href="CommandCenter.html">CommandCenter</a></li>
					<li><a href="Controllable.html">Controllable</a></li>
					<li><a href="DCSAirbase.html">DCSAirbase</a></li>
					<li><a href="DCSCoalitionObject.html">DCSCoalitionObject</a></li>
					<li><a href="DCSCommand.html">DCSCommand</a></li>
					<li><a href="DCSController.html">DCSController</a></li>
					<li><a href="DCSGroup.html">DCSGroup</a></li>
					<li><a href="DCSObject.html">DCSObject</a></li>
					<li><a href="DCSTask.html">DCSTask</a></li>
					<li><a href="DCSTypes.html">DCSTypes</a></li>
					<li><a href="DCSUnit.html">DCSUnit</a></li>
					<li><a href="DCSVec3.html">DCSVec3</a></li>
					<li><a href="DCSWorld.html">DCSWorld</a></li>
					<li><a href="DCSZone.html">DCSZone</a></li>
					<li><a href="DCScountry.html">DCScountry</a></li>
					<li><a href="DCStimer.html">DCStimer</a></li>
					<li><a href="DCStrigger.html">DCStrigger</a></li>
					<li><a href="Database.html">Database</a></li>
					<li><a href="Designate.html">Designate</a></li>
					<li><a href="Detection.html">Detection</a></li>
					<li><a href="DetectionManager.html">DetectionManager</a></li>
					<li><a href="Escort.html">Escort</a></li>
					<li><a href="Event.html">Event</a></li>
					<li><a href="Fsm.html">Fsm</a></li>
					<li><a href="Goal.html">Goal</a></li>
					<li><a href="Group.html">Group</a></li>
					<li><a href="Identifiable.html">Identifiable</a></li>
					<li><a href="Menu.html">Menu</a></li>
					<li><a href="Message.html">Message</a></li>
					<li><a href="MissileTrainer.html">MissileTrainer</a></li>
					<li><a href="Mission.html">Mission</a></li>
					<li><a href="Movement.html">Movement</a></li>
					<li><a href="Object.html">Object</a></li>
					<li><a href="Point.html">Point</a></li>
					<li><a href="Positionable.html">Positionable</a></li>
					<li><a href="Process_JTAC.html">Process_JTAC</a></li>
					<li><a href="Process_Pickup.html">Process_Pickup</a></li>
					<li><a href="Protect.html">Protect</a></li>
					<li><a href="Radio.html">Radio</a></li>
					<li><a href="Range.html">Range</a></li>
					<li><a href="Rat.html">Rat</a></li>
					<li><a href="Route.html">Route</a></li>
					<li><a href="Scenery.html">Scenery</a></li>
					<li><a href="ScheduleDispatcher.html">ScheduleDispatcher</a></li>
					<li><a href="Scheduler.html">Scheduler</a></li>
					<li><a href="Scoring.html">Scoring</a></li>
					<li><a href="Sead.html">Sead</a></li>
					<li><a href="Set.html">Set</a></li>
					<li><a href="Settings.html">Settings</a></li>
					<li><a href="Smoke.html">Smoke</a></li>
					<li><a href="Spawn.html">Spawn</a></li>
					<li><a href="SpawnStatic.html">SpawnStatic</a></li>
					<li><a href="Spot.html">Spot</a></li>
					<li><a href="Static.html">Static</a></li>
					<li><a href="StaticObject.html">StaticObject</a></li>
					<li><a href="Task.html">Task</a></li>
					<li><a href="TaskInfo.html">TaskInfo</a></li>
					<li><a href="TaskZoneCapture.html">TaskZoneCapture</a></li>
					<li><a href="Task_A2A.html">Task_A2A</a></li>
					<li><a href="Task_A2A_Dispatcher.html">Task_A2A_Dispatcher</a></li>
					<li><a href="Task_A2G.html">Task_A2G</a></li>
					<li><a href="Task_A2G_Dispatcher.html">Task_A2G_Dispatcher</a></li>
					<li><a href="Task_Cargo.html">Task_Cargo</a></li>
					<li><a href="Task_PICKUP.html">Task_PICKUP</a></li>
					<li><a href="Unit.html">Unit</a></li>
					<li><a href="UserFlag.html">UserFlag</a></li>
					<li><a href="UserSound.html">UserSound</a></li>
					<li><a href="Utils.html">Utils</a></li>
					<li><a href="Velocity.html">Velocity</a></li>
					<li><a href="Zone.html">Zone</a></li>
					<li>ZoneCaptureCoalition</li>
					<li><a href="ZoneGoal.html">ZoneGoal</a></li>
					<li><a href="ZoneGoalCargo.html">ZoneGoalCargo</a></li>
					<li><a href="ZoneGoalCoalition.html">ZoneGoalCoalition</a></li>
					<li><a href="env.html">env</a></li>
					<li><a href="land.html">land</a></li>
					<li><a href="routines.html">routines</a></li>
		</ul>
	</div>
	<div id="content">
   <h1>Module <code>ZoneCaptureCoalition</code></h1>
   
<p><strong>Functional</strong> -- (WIP R2.3) Models the process to capture a Zone for a Coalition, which is guarded by another Coalition.</p>

   

<hr/>

<p><img src="..\Presentations\ZONE_CAPTURE_COALITION\Dia1.JPG" alt="Banner Image"/></p>

<hr/>

<h3>Contributions: <strong>Millertime</strong>: Concept</h3>
<h3>Author: <strong>Sven Van de Velde (FlightControl)</strong></h3>

<hr/>


	<h2>Global(s)</h2>
	<table class="function_list">
		<tr>
		<td class="name" nowrap="nowrap"><a href="#ZONE_CAPTURE_COALITION">ZONE_CAPTURE_COALITION</a></td>
		<td class="summary">
<h1>ZONE_CAPTURE_COALITION class, extends <a href="ZoneGoalCoalition.html##(ZONE_GOAL_COALITION)">ZoneGoalCoalition#ZONE<em>GOAL</em>COALITION</a></h1>

<p>Models the process to capture a Zone for a Coalition, which is guarded by another Coalition.</p>
</td>
		</tr>
	</table>
			<h2><a id="#(ZONE_CAPTURE_COALITION)">Type <code>ZONE_CAPTURE_COALITION</code></a></h2>
				<table class="function_list">
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).Attack">ZONE_CAPTURE_COALITION:Attack()</a></td>
		<td class="summary">
<p>Attack Trigger for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).Capture">ZONE_CAPTURE_COALITION:Capture()</a></td>
		<td class="summary">
<p>Capture Trigger for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).Empty">ZONE_CAPTURE_COALITION:Empty()</a></td>
		<td class="summary">
<p>Empty Trigger for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).Guard">ZONE_CAPTURE_COALITION:Guard()</a></td>
		<td class="summary">
<p>Guard Trigger for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).IsAttacked">ZONE_CAPTURE_COALITION:IsAttacked()</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).IsCaptured">ZONE_CAPTURE_COALITION:IsCaptured()</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).IsEmpty">ZONE_CAPTURE_COALITION:IsEmpty()</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).IsGuarded">ZONE_CAPTURE_COALITION:IsGuarded()</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).Mark">ZONE_CAPTURE_COALITION:Mark()</a></td>
		<td class="summary">
<p>Mark.</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).MarkBlue">ZONE_CAPTURE_COALITION.MarkBlue</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).MarkRed">ZONE_CAPTURE_COALITION.MarkRed</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).New">ZONE_CAPTURE_COALITION:New(Zone, Coalition)</a></td>
		<td class="summary">
<p>ZONE<em>CAPTURE</em>COALITION Constructor.</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).OnAfterAttack">ZONE_CAPTURE_COALITION:OnAfterAttack(From, Event, To)</a></td>
		<td class="summary">
<p>Attack Handler OnAfter for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).OnAfterCapture">ZONE_CAPTURE_COALITION:OnAfterCapture(From, Event, To)</a></td>
		<td class="summary">
<p>Capture Handler OnAfter for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).OnAfterEmpty">ZONE_CAPTURE_COALITION:OnAfterEmpty(From, Event, To)</a></td>
		<td class="summary">
<p>Empty Handler OnAfter for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).OnAfterGuard">ZONE_CAPTURE_COALITION:OnAfterGuard(From, Event, To)</a></td>
		<td class="summary">
<p>Guard Handler OnAfter for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).OnBeforeAttack">ZONE_CAPTURE_COALITION:OnBeforeAttack(From, Event, To)</a></td>
		<td class="summary">
<p>Attack Handler OnBefore for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).OnBeforeCapture">ZONE_CAPTURE_COALITION:OnBeforeCapture(From, Event, To)</a></td>
		<td class="summary">
<p>Capture Handler OnBefore for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).OnBeforeEmpty">ZONE_CAPTURE_COALITION:OnBeforeEmpty(From, Event, To)</a></td>
		<td class="summary">
<p>Empty Handler OnBefore for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).OnBeforeGuard">ZONE_CAPTURE_COALITION:OnBeforeGuard(From, Event, To)</a></td>
		<td class="summary">
<p>Guard Handler OnBefore for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).ScheduleStatusZone">ZONE_CAPTURE_COALITION.ScheduleStatusZone</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).SmokeScheduler">ZONE_CAPTURE_COALITION.SmokeScheduler</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).States">ZONE_CAPTURE_COALITION.States</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).StatusZone">ZONE_CAPTURE_COALITION:StatusZone()</a></td>
		<td class="summary">
<p>Check status Coalition ownership.</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).__Attack">ZONE_CAPTURE_COALITION:__Attack(Delay)</a></td>
		<td class="summary">
<p>Attack Asynchronous Trigger for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).__Capture">ZONE_CAPTURE_COALITION:__Capture(Delay)</a></td>
		<td class="summary">
<p>Capture Asynchronous Trigger for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).__Empty">ZONE_CAPTURE_COALITION:__Empty(Delay)</a></td>
		<td class="summary">
<p>Empty Asynchronous Trigger for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).__Guard">ZONE_CAPTURE_COALITION:__Guard(Delay)</a></td>
		<td class="summary">
<p>Guard Asynchronous Trigger for ZONE_CAPTURE_COALITION</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).onafterGuard">ZONE_CAPTURE_COALITION:onafterGuard()</a></td>
		<td class="summary">
<p>When started, check the Coalition status.</p>
</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).onenterAttacked">ZONE_CAPTURE_COALITION:onenterAttacked()</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).onenterCaptured">ZONE_CAPTURE_COALITION:onenterCaptured()</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).onenterEmpty">ZONE_CAPTURE_COALITION:onenterEmpty()</a></td>
		<td class="summary">

</td>
		</tr>
		<tr>
		<td class="name" nowrap="nowrap"><a href="##(ZONE_CAPTURE_COALITION).onenterGuarded">ZONE_CAPTURE_COALITION:onenterGuarded()</a></td>
		<td class="summary">
<p>Bound.</p>
</td>
		</tr>
	</table>

	<h2>Global(s)</h2>
		<dl class="function">
<dt>

		<em><a href="##(ZONE_CAPTURE_COALITION)">#ZONE_CAPTURE_COALITION</a></em>
<a id="ZONE_CAPTURE_COALITION" >
<strong>ZONE_CAPTURE_COALITION</strong>
</a>
</dt>
<dd>
	
<h1>ZONE_CAPTURE_COALITION class, extends <a href="ZoneGoalCoalition.html##(ZONE_GOAL_COALITION)">ZoneGoalCoalition#ZONE<em>GOAL</em>COALITION</a></h1>

<p>Models the process to capture a Zone for a Coalition, which is guarded by another Coalition.</p>

	
<p>This is a powerful concept that allows to create very dynamic missions based on the different state transitions of various zones.</p>

<hr/>

<p><img src="..\Presentations\ZONE_CAPTURE_COALITION\Dia1.JPG" alt="Banner Image"/></p>

<hr/>

<h1>0. Player Experience</h1>

<p><img src="..\Presentations\ZONE_CAPTURE_COALITION\Dia3.JPG" alt="States"/></p>

<p>The Zone is initially <strong>Guarded</strong> by the <strong>owning coalition</strong>, which is the coalition that initially occupies the zone with units of its coalition.
Once units of an other coalition are entering the Zone, the state will change to <strong>Attacked</strong>. As long as these units remain in the zone, the state keeps set to Attacked.
When all units are destroyed in the Zone, the state will change to <strong>Empty</strong>, which expresses that the Zone is empty, and can be captured.
When units of the other coalition are in the Zone, and no other units of the owning coalition is in the Zone, the Zone is captured, and its state will change to <strong>Captured</strong>.</p>

<p>The above models the possible state transitions between the Guarded, Attacked, Empty and Captured states.</p>

<h2>1. ZONE_CAPTURE_COALITION constructor</h2>

<ul>
    <li><a href="##(ZONE_CAPTURE_COALITION).New">ZONE<em>CAPTURE</em>COALITION.New</a>(): Creates a new ZONE_CAPTURE_COALITION object.</li>
</ul>

<p>In order to use ZONE_CAPTURE_COALITION, you need to:</p>

<ul>
    <li>Create a <a href="Zone.html">Zone</a> object from one of the ZONE_ classes. Note that ZONE_POLYGON_ classes are not yet functional. The only functional ZONE_ classses are those derived from a ZONE_RADIUS.</li>
</ul>

<p><img src="..\Presentations\ZONE_CAPTURE_COALITION\Dia5.JPG" alt="New"/></p>

<p>Ensure that during the life cycle of the ZONE_CAPTURE_COALITION object, the object keeps alive.
It is best to declare the object globally within your script.</p>

<h2>2. ZONE_CAPTURE_COALITION is a finite state machine (FSM).</h2>

<p><img src="..\Presentations\ZONE_CAPTURE_COALITION\Dia4.JPG" alt="States"/></p>

<h3>2.1 ZONE_CAPTURE_COALITION States</h3>

<ul>
    <li><strong>Captured</strong>: The Zone has been captured by an other coalition.</li>
    <li><strong>Attacked</strong>: The Zone is currently intruded by an other coalition. There are units of the owning coalition and an other coalition in the Zone.</li>
    <li><strong>Guarded</strong>: The Zone is guarded by the owning coalition. There is no other unit of an other coalition in the Zone.</li>
    <li><strong>Empty</strong>: The Zone is empty. There is not valid unit in the Zone.</li>
</ul>

<h3>2.2 ZONE_CAPTURE_COALITION Events</h3>

<ul>
    <li><strong>Capture</strong>: The Zone has been captured by an other coalition.</li>
    <li><strong>Attack</strong>: The Zone is currently intruded by an other coalition. There are units of the owning coalition and an other coalition in the Zone.</li>
    <li><strong>Guard</strong>: The Zone is guarded by the owning coalition. There is no other unit of an other coalition in the Zone.</li>
    <li><strong>Empty</strong>: The Zone is empty. There is not valid unit in the Zone.</li>
</ul>

<h2>3. "Script It"</h2>

<p>ZONE_CAPTURE_COALITION allows to take action on the various state transitions and add your custom code and logic.</p>

<h3>3.1. Take action using state- and event handlers.</h3>

<p><img src="..\Presentations\ZONE_CAPTURE_COALITION\Dia6.JPG" alt="States"/></p>

<p>The most important to understand is how states and events can be tailored.
Carefully study the diagram and the explanations.</p>

<p><strong>State Handlers</strong> capture the moment:</p>

<ul>
    <li>On Leave from the old state. Return false to cancel the transition.</li>
    <li>On Enter to the new state.</li>
</ul>

<p><strong>Event Handlers</strong> capture the moment:</p>

<ul>
    <li>On Before the event is triggered. Return false to cancel the transition.</li>
    <li>On After the event is triggered.</li>
</ul>



<p><img src="..\Presentations\ZONE_CAPTURE_COALITION\Dia7.JPG" alt="States"/></p>

<p>Each handler can receive optionally 3 parameters:</p>

<ul>
    <li><strong>From</strong>: A string containing the From State.</li>
    <li><strong>Event</strong>: A string containing the Event.</li>
    <li><strong>To</strong>: A string containing the To State.</li>
</ul>

<p>The mission designer can use these values to alter the logic.
For example:</p>

<pre><code>--- @param Functional.ZoneCaptureCoalition#ZONE_CAPTURE_COALITION self
function ZoneCaptureCoalition:OnEnterGuarded( From, Event, To )
  if From ~= "Empty" then
    -- Display a message
  end
end
</code></pre>

<p>This code checks that when the <strong>Guarded</strong> state has been reached, that if the <strong>From</strong> state was <strong>Empty</strong>, then display a message.</p>

<h3>3.2. Example Event Handler.</h3>

<pre><code>--- @param Functional.ZoneCaptureCoalition#ZONE_CAPTURE_COALITION self
function ZoneCaptureCoalition:OnEnterGuarded( From, Event, To )
  if From ~= To then
    local Coalition = self:GetCoalition()
    self:E( { Coalition = Coalition } )
    if Coalition == coalition.side.BLUE then
      ZoneCaptureCoalition:Smoke( SMOKECOLOR.Blue )
      US_CC:MessageTypeToCoalition( string.format( "%s is under protection of the USA", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
      RU_CC:MessageTypeToCoalition( string.format( "%s is under protection of the USA", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
    else
      ZoneCaptureCoalition:Smoke( SMOKECOLOR.Red )
      RU_CC:MessageTypeToCoalition( string.format( "%s is under protection of Russia", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
      US_CC:MessageTypeToCoalition( string.format( "%s is under protection of Russia", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
    end
  end
end
</code></pre>

<h2>4. Full Example</h2>

<p>The following annotated code shows a real example of how ZONE_CAPTURE_COALITION can be applied.</p>

<p>The concept is simple.</p>

<p>The USA (US), blue coalition, needs to capture the Russian (RU), red coalition, zone, which is near groom lake.</p>

<p>A capture zone has been setup that guards the presence of the troops.
Troops are guarded by red forces. Blue is required to destroy the red forces and capture the zones.</p>

<p>At first, we setup the Command Centers</p>

<pre><code> do

   RU_CC = COMMANDCENTER:New( GROUP:FindByName( "REDHQ" ), "Russia HQ" )
   US_CC = COMMANDCENTER:New( GROUP:FindByName( "BLUEHQ" ), "USA HQ" )

 end
</code></pre>

<p>Next, we define the mission, and add some scoring to it.</p>

<pre><code> do -- Missions

   US_Mission_EchoBay = MISSION:New( US_CC, "Echo Bay", "Primary",
     "Welcome trainee. The airport Groom Lake in Echo Bay needs to be captured.\n" ..
     "There are five random capture zones located at the airbase.\n" ..
     "Move to one of the capture zones, destroy the fuel tanks in the capture zone, " ..
     "and occupy each capture zone with a platoon.\n " .. 
     "Your orders are to hold position until all capture zones are taken.\n" ..
     "Use the map (F10) for a clear indication of the location of each capture zone.\n" ..
     "Note that heavy resistance can be expected at the airbase!\n" ..
     "Mission 'Echo Bay' is complete when all five capture zones are taken, and held for at least 5 minutes!"
     , coalition.side.RED)

   US_Score = SCORING:New( "CAZ-001 - Capture Zone" )

   US_Mission_EchoBay:AddScoring( US_Score )

   US_Mission_EchoBay:Start()

 end
</code></pre>


<p>Now the real work starts.
We define a <strong>CaptureZone</strong> object, which is a ZONE object.
Within the mission, a trigger zone is created with the name <strong>CaptureZone</strong>, with the defined radius within the mission editor.</p>

<pre><code> CaptureZone = ZONE:New( "CaptureZone" )
</code></pre>

<p>Next, we define the <strong>ZoneCaptureCoalition</strong> object, as explained above.</p>

<pre><code> ZoneCaptureCoalition = ZONE_CAPTURE_COALITION:New( CaptureZone, coalition.side.RED ) 
</code></pre>

<p>Of course, we want to let the <strong>ZoneCaptureCoalition</strong> object do something when the state transitions.
Do accomodate this, it is very simple, as explained above.
We use <strong>Event Handlers</strong> to tailor the logic.</p>

<p>Here we place an Event Handler at the Guarded event. So when the <strong>Guarded</strong> event is triggered, then this method is called!
With the variables <strong>From</strong>, <strong>Event</strong>, <strong>To</strong>. Each of these variables containing a string.</p>

<p>We check if the previous state wasn't Guarded also.
If not, we retrieve the owning Coalition of the <strong>ZoneCaptureCoalition</strong>, using <code>self:GetCoalition()</code>.
So <strong>Coalition</strong> will contain the current owning coalition of the zone.</p>

<p>Depending on the zone ownership, different messages are sent.
Note the methods <code>ZoneCaptureCoalition:GetZoneName()</code>.</p>

<pre><code> --- @param Functional.ZoneCaptureCoalition#ZONE_CAPTURE_COALITION self
 function ZoneCaptureCoalition:OnEnterGuarded( From, Event, To )
   if From ~= To then
     local Coalition = self:GetCoalition()
     self:E( { Coalition = Coalition } )
     if Coalition == coalition.side.BLUE then
       ZoneCaptureCoalition:Smoke( SMOKECOLOR.Blue )
       US_CC:MessageTypeToCoalition( string.format( "%s is under protection of the USA", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
       RU_CC:MessageTypeToCoalition( string.format( "%s is under protection of the USA", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
     else
       ZoneCaptureCoalition:Smoke( SMOKECOLOR.Red )
       RU_CC:MessageTypeToCoalition( string.format( "%s is under protection of Russia", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
       US_CC:MessageTypeToCoalition( string.format( "%s is under protection of Russia", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
     end
   end
 end
</code></pre>

<p>As you can see, not a rocket science.
Next is the Event Handler when the <strong>Empty</strong> state transition is triggered.
Now we smoke the ZoneCaptureCoalition with a green color, using <code>self:Smoke( SMOKECOLOR.Green )</code>.</p>

<pre><code> --- @param Functional.Protect#ZONE_CAPTURE_COALITION self
 function ZoneCaptureCoalition:OnEnterEmpty()
   self:Smoke( SMOKECOLOR.Green )
   US_CC:MessageTypeToCoalition( string.format( "%s is unprotected, and can be captured!", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
   RU_CC:MessageTypeToCoalition( string.format( "%s is unprotected, and can be captured!", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
 end
</code></pre>

<p>The next Event Handlers speak for itself.
When the zone is Attacked, we smoke the zone white and send some messages to each coalition.     </p>

<pre><code> --- @param Functional.Protect#ZONE_CAPTURE_COALITION self
 function ZoneCaptureCoalition:OnEnterAttacked()
   ZoneCaptureCoalition:Smoke( SMOKECOLOR.White )
   local Coalition = self:GetCoalition()
   self:E({Coalition = Coalition})
   if Coalition == coalition.side.BLUE then
     US_CC:MessageTypeToCoalition( string.format( "%s is under attack by Russia", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
     RU_CC:MessageTypeToCoalition( string.format( "We are attacking %s", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
   else
     RU_CC:MessageTypeToCoalition( string.format( "%s is under attack by the USA", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
     US_CC:MessageTypeToCoalition( string.format( "We are attacking %s", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
   end
 end
</code></pre>

<p>When the zone is Captured, we send some victory or loss messages to the correct coalition.
And we add some score.</p>

<pre><code> --- @param Functional.Protect#ZONE_CAPTURE_COALITION self
 function ZoneCaptureCoalition:OnEnterCaptured()
   local Coalition = self:GetCoalition()
   self:E({Coalition = Coalition})
   if Coalition == coalition.side.BLUE then
     RU_CC:MessageTypeToCoalition( string.format( "%s is captured by the USA, we lost it!", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
     US_CC:MessageTypeToCoalition( string.format( "We captured %s, Excellent job!", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
   else
     US_CC:MessageTypeToCoalition( string.format( "%s is captured by Russia, we lost it!", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
     RU_CC:MessageTypeToCoalition( string.format( "We captured %s, Excellent job!", ZoneCaptureCoalition:GetZoneName() ), MESSAGE.Type.Information )
   end

   self:AddScore( "Captured", "Zone captured: Extra points granted.", 200 )    

   self:__Guard( 30 )
 end
</code></pre>

<p>And this call is the most important of all!
Here we ensure that we <strong>Guard</strong> the <strong>ZoneCaptureCoalition</strong>!!</p>

<p>If we don't call this method, the whole guarding process won't be started!!!</p>

<pre><code> ZoneCaptureCoalition:__Guard( 1 )
</code></pre>




</dd>
</dl>
	<h2><a id="#(ZoneCaptureCoalition)" >Type <code>ZoneCaptureCoalition</code></a></h2>
	
			<h2><a id="#(ZONE_CAPTURE_COALITION)" >Type <code>ZONE_CAPTURE_COALITION</code></a></h2>
				<h3>Field(s)</h3>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).Attack" >
<strong>ZONE_CAPTURE_COALITION:Attack()</strong>
</a>
</dt>
<dd>
	
<p>Attack Trigger for ZONE_CAPTURE_COALITION</p>

</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).Capture" >
<strong>ZONE_CAPTURE_COALITION:Capture()</strong>
</a>
</dt>
<dd>
	
<p>Capture Trigger for ZONE_CAPTURE_COALITION</p>

</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).Empty" >
<strong>ZONE_CAPTURE_COALITION:Empty()</strong>
</a>
</dt>
<dd>
	
<p>Empty Trigger for ZONE_CAPTURE_COALITION</p>

</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).Guard" >
<strong>ZONE_CAPTURE_COALITION:Guard()</strong>
</a>
</dt>
<dd>
	
<p>Guard Trigger for ZONE_CAPTURE_COALITION</p>

</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).IsAttacked" >
<strong>ZONE_CAPTURE_COALITION:IsAttacked()</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).IsCaptured" >
<strong>ZONE_CAPTURE_COALITION:IsCaptured()</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).IsEmpty" >
<strong>ZONE_CAPTURE_COALITION:IsEmpty()</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).IsGuarded" >
<strong>ZONE_CAPTURE_COALITION:IsGuarded()</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).Mark" >
<strong>ZONE_CAPTURE_COALITION:Mark()</strong>
</a>
</dt>
<dd>
	
<p>Mark.</p>

</dd>
</dl>
		<dl class="function">
<dt>

		<em></em>
<a id="#(ZONE_CAPTURE_COALITION).MarkBlue" >
<strong>ZONE_CAPTURE_COALITION.MarkBlue</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

		<em></em>
<a id="#(ZONE_CAPTURE_COALITION).MarkRed" >
<strong>ZONE_CAPTURE_COALITION.MarkRed</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).New" >
<strong>ZONE_CAPTURE_COALITION:New(Zone, Coalition)</strong>
</a>
</dt>
<dd>
	
<p>ZONE<em>CAPTURE</em>COALITION Constructor.</p>

		<h3>Parameters</h3>
		<ul>
				<li>
				
<p><code><em><a href="Core.Zone.html##(ZONE)">Core.Zone#ZONE</a> Zone </em></code>: 
A <a href="Zone.html">Zone</a> object with the goal to be achieved.</p>

				</li>
				<li>
				
<p><code><em><a href="DCSCoalition.DCSCoalition.html##(coalition)">DCSCoalition.DCSCoalition#coalition</a> Coalition </em></code>: 
The initial coalition owning the zone.</p>

				</li>
		</ul>
		<h3>Return value</h3>
				
<p><em><a href="##(ZONE_CAPTURE_COALITION)">#ZONE<em>CAPTURE</em>COALITION</a>:</em></p>


			<h3>Usage:</h3>
		<pre class="example"><code>
 AttackZone = ZONE:New( "AttackZone" )

 ZoneCaptureCoalition = ZONE_CAPTURE_COALITION:New( AttackZone, coalition.side.RED ) -- Create a new ZONE_CAPTURE_COALITION object of zone AttackZone with ownership RED coalition.
 ZoneCaptureCoalition:__Guard( 1 ) -- Start the Guarding of the AttackZone.
 </code></pre>

</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).OnAfterAttack" >
<strong>ZONE_CAPTURE_COALITION:OnAfterAttack(From, Event, To)</strong>
</a>
</dt>
<dd>
	
<p>Attack Handler OnAfter for ZONE_CAPTURE_COALITION</p>

		<h3>Parameters</h3>
		<ul>
				<li>
				
<p><code><em>#string From </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string Event </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string To </em></code>: </p>

				</li>
		</ul>
</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).OnAfterCapture" >
<strong>ZONE_CAPTURE_COALITION:OnAfterCapture(From, Event, To)</strong>
</a>
</dt>
<dd>
	
<p>Capture Handler OnAfter for ZONE_CAPTURE_COALITION</p>

		<h3>Parameters</h3>
		<ul>
				<li>
				
<p><code><em>#string From </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string Event </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string To </em></code>: </p>

				</li>
		</ul>
</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).OnAfterEmpty" >
<strong>ZONE_CAPTURE_COALITION:OnAfterEmpty(From, Event, To)</strong>
</a>
</dt>
<dd>
	
<p>Empty Handler OnAfter for ZONE_CAPTURE_COALITION</p>

		<h3>Parameters</h3>
		<ul>
				<li>
				
<p><code><em>#string From </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string Event </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string To </em></code>: </p>

				</li>
		</ul>
</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).OnAfterGuard" >
<strong>ZONE_CAPTURE_COALITION:OnAfterGuard(From, Event, To)</strong>
</a>
</dt>
<dd>
	
<p>Guard Handler OnAfter for ZONE_CAPTURE_COALITION</p>

		<h3>Parameters</h3>
		<ul>
				<li>
				
<p><code><em>#string From </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string Event </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string To </em></code>: </p>

				</li>
		</ul>
</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).OnBeforeAttack" >
<strong>ZONE_CAPTURE_COALITION:OnBeforeAttack(From, Event, To)</strong>
</a>
</dt>
<dd>
	
<p>Attack Handler OnBefore for ZONE_CAPTURE_COALITION</p>

		<h3>Parameters</h3>
		<ul>
				<li>
				
<p><code><em>#string From </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string Event </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string To </em></code>: </p>

				</li>
		</ul>
		<h3>Return value</h3>
				
<p><em>#boolean:</em></p>


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).OnBeforeCapture" >
<strong>ZONE_CAPTURE_COALITION:OnBeforeCapture(From, Event, To)</strong>
</a>
</dt>
<dd>
	
<p>Capture Handler OnBefore for ZONE_CAPTURE_COALITION</p>

		<h3>Parameters</h3>
		<ul>
				<li>
				
<p><code><em>#string From </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string Event </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string To </em></code>: </p>

				</li>
		</ul>
		<h3>Return value</h3>
				
<p><em>#boolean:</em></p>


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).OnBeforeEmpty" >
<strong>ZONE_CAPTURE_COALITION:OnBeforeEmpty(From, Event, To)</strong>
</a>
</dt>
<dd>
	
<p>Empty Handler OnBefore for ZONE_CAPTURE_COALITION</p>

		<h3>Parameters</h3>
		<ul>
				<li>
				
<p><code><em>#string From </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string Event </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string To </em></code>: </p>

				</li>
		</ul>
		<h3>Return value</h3>
				
<p><em>#boolean:</em></p>


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).OnBeforeGuard" >
<strong>ZONE_CAPTURE_COALITION:OnBeforeGuard(From, Event, To)</strong>
</a>
</dt>
<dd>
	
<p>Guard Handler OnBefore for ZONE_CAPTURE_COALITION</p>

		<h3>Parameters</h3>
		<ul>
				<li>
				
<p><code><em>#string From </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string Event </em></code>: </p>

				</li>
				<li>
				
<p><code><em>#string To </em></code>: </p>

				</li>
		</ul>
		<h3>Return value</h3>
				
<p><em>#boolean:</em></p>


</dd>
</dl>
		<dl class="function">
<dt>

		<em></em>
<a id="#(ZONE_CAPTURE_COALITION).ScheduleStatusZone" >
<strong>ZONE_CAPTURE_COALITION.ScheduleStatusZone</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

		<em></em>
<a id="#(ZONE_CAPTURE_COALITION).SmokeScheduler" >
<strong>ZONE_CAPTURE_COALITION.SmokeScheduler</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

		<em></em>
<a id="#(ZONE_CAPTURE_COALITION).States" >
<strong>ZONE_CAPTURE_COALITION.States</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).StatusZone" >
<strong>ZONE_CAPTURE_COALITION:StatusZone()</strong>
</a>
</dt>
<dd>
	
<p>Check status Coalition ownership.</p>

</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).__Attack" >
<strong>ZONE_CAPTURE_COALITION:__Attack(Delay)</strong>
</a>
</dt>
<dd>
	
<p>Attack Asynchronous Trigger for ZONE_CAPTURE_COALITION</p>

		<h3>Parameter</h3>
		<ul>
				<li>
				
<p><code><em>#number Delay </em></code>: </p>

				</li>
		</ul>
</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).__Capture" >
<strong>ZONE_CAPTURE_COALITION:__Capture(Delay)</strong>
</a>
</dt>
<dd>
	
<p>Capture Asynchronous Trigger for ZONE_CAPTURE_COALITION</p>

		<h3>Parameter</h3>
		<ul>
				<li>
				
<p><code><em>#number Delay </em></code>: </p>

				</li>
		</ul>
</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).__Empty" >
<strong>ZONE_CAPTURE_COALITION:__Empty(Delay)</strong>
</a>
</dt>
<dd>
	
<p>Empty Asynchronous Trigger for ZONE_CAPTURE_COALITION</p>

		<h3>Parameter</h3>
		<ul>
				<li>
				
<p><code><em>#number Delay </em></code>: </p>

				</li>
		</ul>
</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).__Guard" >
<strong>ZONE_CAPTURE_COALITION:__Guard(Delay)</strong>
</a>
</dt>
<dd>
	
<p>Guard Asynchronous Trigger for ZONE_CAPTURE_COALITION</p>

		<h3>Parameter</h3>
		<ul>
				<li>
				
<p><code><em>#number Delay </em></code>: </p>

				</li>
		</ul>
</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).onafterGuard" >
<strong>ZONE_CAPTURE_COALITION:onafterGuard()</strong>
</a>
</dt>
<dd>
	
<p>When started, check the Coalition status.</p>

</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).onenterAttacked" >
<strong>ZONE_CAPTURE_COALITION:onenterAttacked()</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).onenterCaptured" >
<strong>ZONE_CAPTURE_COALITION:onenterCaptured()</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).onenterEmpty" >
<strong>ZONE_CAPTURE_COALITION:onenterEmpty()</strong>
</a>
</dt>
<dd>
	


</dd>
</dl>
		<dl class="function">
<dt>

<a id="#(ZONE_CAPTURE_COALITION).onenterGuarded" >
<strong>ZONE_CAPTURE_COALITION:onenterGuarded()</strong>
</a>
</dt>
<dd>
	
<p>Bound.</p>

</dd>
</dl>

</div>

</div>
</body>
</html>
